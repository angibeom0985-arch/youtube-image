<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì½˜í…ì¸  ì•ˆì „ì„± í…ŒìŠ¤íŠ¸</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
        margin-bottom: 20px;
      }
      textarea {
        width: 100%;
        height: 150px;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
        margin-bottom: 10px;
        resize: vertical;
      }
      button {
        background: #4caf50;
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-right: 10px;
      }
      button:hover {
        background: #45a049;
      }
      .clear-btn {
        background: #f44336;
      }
      .clear-btn:hover {
        background: #da190b;
      }
      .result {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
      }
      .safe {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
      }
      .unsafe {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
      }
      .replacement {
        background: #fff3cd;
        border: 1px solid #ffeeba;
        color: #856404;
        margin-top: 10px;
      }
      .word-list {
        margin-top: 10px;
        font-family: monospace;
      }
      .test-cases {
        margin-top: 30px;
        padding: 20px;
        background: #e3f2fd;
        border-radius: 5px;
      }
      .test-case {
        margin: 10px 0;
        padding: 10px;
        background: white;
        border-left: 4px solid #2196f3;
        cursor: pointer;
      }
      .test-case:hover {
        background: #f5f5f5;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ›¡ï¸ ì½˜í…ì¸  ì•ˆì „ì„± í…ŒìŠ¤íŠ¸</h1>
      <p>
        ì•„ë˜ í…ìŠ¤íŠ¸ ì…ë ¥ë€ì— í…ŒìŠ¤íŠ¸í•  ë¬¸ì¥ì„ ì…ë ¥í•˜ê³  "ê²€ì‚¬í•˜ê¸°" ë²„íŠ¼ì„
        í´ë¦­í•˜ì„¸ìš”.
      </p>

      <textarea
        id="inputText"
        placeholder="ì˜ˆ: ì‚´ì¸ ì‚¬ê±´ì„ ì¡°ì‚¬í•˜ëŠ” í˜•ì‚¬"
      ></textarea>

      <button onclick="checkSafety()">ğŸ” ê²€ì‚¬í•˜ê¸°</button>
      <button class="clear-btn" onclick="clearInput()">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>

      <div id="result"></div>

      <div class="test-cases">
        <h3>ğŸ“‹ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ (í´ë¦­í•˜ì—¬ ìë™ ì…ë ¥)</h3>
        <div class="test-case" onclick="setTestCase(this)">
          ì‚´ì¸ ì‚¬ê±´ì„ ì¡°ì‚¬í•˜ëŠ” í˜•ì‚¬
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          ê³µí¬ ì˜í™”ì— ë‚˜ì˜¤ëŠ” ë¬´ì„œìš´ ê´´ë¬¼
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          ìœ„í—˜í•œ ë²”ì£„ìì™€ ëŒ€ê²°í•˜ëŠ” ê²½ì°°
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          ì–´ë‘ìš´ ë°¤, ì €ì£¼ë°›ì€ ë§ˆì„
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          í­ë ¥ì ì¸ ì‹¸ì›€ ì¥ë©´
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          ì£½ìŒì˜ ê·¸ë¦¼ìê°€ ë“œë¦¬ìš´ ë„ì‹œ
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          ì•…ì—­ì´ ì¹¼ì„ ë“¤ê³  ìœ„í˜‘í•˜ëŠ” ì¥ë©´
        </div>
        <div class="test-case" onclick="setTestCase(this)">
          í‰í™”ë¡œìš´ ì¼ìƒì„ ë³´ë‚´ëŠ” ê°€ì¡±
        </div>
      </div>
    </div>

    <script>
      // ì½˜í…ì¸  ì•ˆì „ì„± ë§µ (contentSafety.tsì—ì„œ ë³µì‚¬)
      const UNSAFE_WORDS_MAP = {
        // ë²”ì£„ ê´€ë ¨
        ê³µë²”: "í˜‘ë ¥ì",
        ë²”ì£„ì: "ì¸ë¬¼",
        ì•…ì—­: "ìƒëŒ€ì—­",
        ì•…ë‹¹: "ìƒëŒ€ì—­",
        ì•…ì¸: "ì¸ë¬¼",
        ë²”ì¸: "ì¸ë¬¼",
        ì‚´ì¸ì: "ì¸ë¬¼",
        ì‚´ì¸ë²”: "ì¸ë¬¼",
        ì‚´ì¸: "ì‚¬ê±´",
        ì‚´í•´: "ì‚¬ê±´",
        ë„ë‘‘: "ì¸ë¬¼",
        ê°•ë„: "ì¸ë¬¼",
        ê°•ë„ì§ˆ: "ì‚¬ê±´",
        ë²”ì£„: "ì‚¬ê±´",
        ë‚©ì¹˜: "ì‚¬ê±´",
        ìœ ê´´: "ì‚¬ê±´",
        í…ŒëŸ¬: "ì‚¬ê±´",
        í…ŒëŸ¬ë²”: "ì¸ë¬¼",
        ì•”ì‚´: "ì‚¬ê±´",
        ì•”ì‚´ì: "ì¸ë¬¼",

        // í­ë ¥ ê´€ë ¨
        ìœ„í—˜í•œ: "ì‹ ì¤‘í•œ",
        ìœ„í—˜: "ì¡°ì‹¬ìŠ¤ëŸ¬ìš´",
        ë¬´ì„œìš´: "ì§„ì§€í•œ",
        ìœ„í˜‘ì ì¸: "ë‹¹ë‹¹í•œ",
        ìœ„í˜‘: "ë„ì „",
        ì”ì¸í•œ: "ì—„ê²©í•œ",
        ì”ì¸: "ê°•í•œ",
        í¬ì•…í•œ: "ê°•ì¸í•œ",
        í¬ì•…: "ê°•ì¸í•¨",
        í­ë ¥: "í˜",
        í­ë ¥ì : "ê°•í•œ",
        ê³µê²©: "í–‰ë™",
        ê³µê²©ì : "ì ê·¹ì ",
        ì‹¸ì›€: "ê²½ìŸ",
        ì „ìŸ: "ê²½ìŸ",
        ì „íˆ¬: "ê²½ìŸ",
        ë¬´ê¸°: "ë„êµ¬",
        ì¹¼: "ë„êµ¬",
        ê²€: "ë„êµ¬",
        ì´: "ë„êµ¬",
        ê¶Œì´: "ë„êµ¬",
        í­íƒ„: "ë¬¼ê±´",
        í­ë°œ: "ì‚¬ê±´",
        í”¼: "ë¶‰ì€ìƒ‰",
        í”¼ê°€: "ë¶‰ì€ìƒ‰ì´",
        í”¼ë¥¼: "ë¶‰ì€ìƒ‰ì„",
        í”¼ë²”ë²…: "ë¶‰ì€ìƒ‰",
        í”¼íˆ¬ì„±ì´: "ë¶‰ì€ìƒ‰",
        ì£½ìŒ: "ì¢…ë§",
        ì£½ì€: "ê³ ìš”í•œ",
        ì£½ì´: "ë©ˆì¶”",
        ì‚¬ë§: "ì¢…ë§",
        ì‚¬ì²´: "ì¸ë¬¼",
        ì‹œì²´: "ì¸ë¬¼",
        ê³ ë¬¸: "ì‹¬ë¬¸",
        êµ¬íƒ€: "ì¶©ëŒ",
        í­í–‰: "ì¶©ëŒ",
        í•™ëŒ€: "ì–´ë ¤ì›€",

        // ì™¸ëª¨/ë¶„ìœ„ê¸° ê´€ë ¨
        ì–´ë‘ : "ì§„í•œ ìƒ‰",
        ì–´ë‘ìš´: "ì§„í•œ ìƒ‰ì˜",
        ì–´ë‘¡: "ì§„í•œ ìƒ‰",
        ê²€ì€: "ì–´ë‘ìš´ ìƒ‰ì˜",
        ê²€ì •: "ì–´ë‘ìš´ ìƒ‰",
        ì•”í‘: "ì§„í•œ ìƒ‰",
        ë¯¸ìŠ¤í„°ë¦¬í•œ: "ì‹ ë¹„ë¡œìš´",
        ë¯¸ìŠ¤í„°ë¦¬: "ì‹ ë¹„",
        ìˆ˜ìƒí•œ: "ë…íŠ¹í•œ",
        ìˆ˜ìƒ: "ë…íŠ¹í•¨",
        ì˜ì‹¬ìŠ¤ëŸ¬ìš´: "ì‹ ì¤‘í•œ",
        ì˜ì‹¬: "ì£¼ì˜",
        ê´´ë¬¼: "ë…íŠ¹í•œ ì¡´ì¬",
        ê´´ìˆ˜: "í° ì¡´ì¬",
        ê·€ì‹ : "ì‹ ë¹„ë¡œìš´ ì¡´ì¬",
        ìœ ë ¹: "ì‹ ë¹„ë¡œìš´ ì¡´ì¬",
        ì•…ë§ˆ: "ê°•í•œ ì¡´ì¬",
        ë§ˆê·€: "ê°•í•œ ì¡´ì¬",
        ì•…ê·€: "ì‹ ë¹„ë¡œìš´ ì¡´ì¬",
        ì €ì£¼: "ìš´ëª…",
        ì €ì£¼ë°›ì€: "ìš´ëª…ì ì¸",
        ì§€ì˜¥: "ì–´ë ¤ìš´ ê³³",
        ì•…ëª½: "ê¿ˆ",

        // ë¶€ì •ì  ê°ì •/í‘œí˜„
        ì‚¬ì•…í•œ: "ì¹´ë¦¬ìŠ¤ë§ˆ ìˆëŠ”",
        ì‚¬ì•…: "ê°•í•œ ì¹´ë¦¬ìŠ¤ë§ˆ",
        ìŒí—˜í•œ: "ì‹ ì¤‘í•œ",
        ìŒí—˜: "ì‹ ì¤‘í•¨",
        êµí™œí•œ: "ì˜ë¦¬í•œ",
        êµí™œ: "ì˜ë¦¬í•¨",
        ê°„êµí•œ: "ì˜ë¦¬í•œ",
        ë¶ˆê¸¸í•œ: "ì‹ ë¹„ë¡œìš´",
        ë¶ˆê¸¸: "ì‹ ë¹„ë¡œì›€",
        í‰ì•…í•œ: "ê°•ë ¬í•œ",
        í‰ì•…: "ê°•ë ¬í•¨",
        ì¦ì˜¤: "ê°•í•œ ê°ì •",
        ì¦ì˜¤í•˜: "ì‹«ì–´í•˜",
        í˜ì˜¤: "ê±°ë¶€ê°",
        í˜ì˜¤ìŠ¤: "ë¶ˆì¾Œí•œ",
        ê³µí¬: "ê¸´ì¥ê°",
        ê³µí¬ìŠ¤: "ê¸´ì¥ë˜ëŠ”",
        ë”ì°: "ê°•ë ¬í•œ",
        ë”ì°í•œ: "ê°•ë ¬í•œ",
        ë¬´ì‹œë¬´ì‹œ: "ê°•ë ¬í•œ",
        ì†Œë¦„: "ë†€ë¼ìš´",
        ì†Œë¦„ë¼: "ë†€ë¼ìš´",
        ì„¬ëœ©: "ì¸ìƒì ",
        ì„¬ëœ©í•œ: "ì¸ìƒì ì¸",
        ì”í˜¹: "ê°•í•œ",
        ì”í˜¹í•œ: "ê°•í•œ",

        // ë‚˜ì´/ì‹ ì²´ ë¯¼ê° í‘œí˜„
        ëŠ™ì€: "ë‚˜ì´ ë“ ",
        ë…¸ì¸: "ì–´ë¥´ì‹ ",
        í• ë¨¸ë‹ˆ: "ì—°ì„¸ ë“œì‹  ì—¬ì„±",
        í• ì•„ë²„ì§€: "ì—°ì„¸ ë“œì‹  ë‚¨ì„±",
        ë³‘ë“ : "ì•„í”ˆ",
        ë³‘ì: "í™˜ì",
        ì¥ì• : "íŠ¹ë³„í•œ",
        ì¥ì• ì¸: "íŠ¹ë³„í•œ ì‚¬ëŒ",
        ë¶ˆêµ¬: "íŠ¹ë³„í•œ",
        ì¶”í•œ: "ë…íŠ¹í•œ",
        ëª»ìƒê¸´: "ë…íŠ¹í•œ",

        // ê¸°íƒ€ ë¯¼ê° í‘œí˜„
        ìŒë€: "ë§¤ë ¥ì ",
        ìŒë€í•œ: "ë§¤ë ¥ì ì¸",
        ì„ ì •ì : "ë§¤ë ¥ì ",
        ì„¹ì‹œ: "ë§¤ë ¥ì ",
        ì•¼í•œ: "ë§¤ë ¥ì ",
        ë‚˜ì²´: "ì¸ë¬¼",
        ë²—ì€: "ë‹¨ìˆœí•œ",
        ë²—ê¸´: "ë‹¨ìˆœí•œ",
        ìˆ : "ìŒë£Œ",
        ìˆ ì—: "ìŒë£Œì—",
        ë‹´ë°°: "ë¬¼ê±´",
        í¡ì—°: "íœ´ì‹",
        ë§ˆì•½: "ë¬¼ì§ˆ",
        ì•½ë¬¼: "ë¬¼ì§ˆ",
        ìì‚´: "ì¢…ë§",
        ìí•´: "ìƒì²˜",
      };

      function detectUnsafeWords(text) {
        const foundWords = [];
        const sortedWords = Object.keys(UNSAFE_WORDS_MAP).sort(
          (a, b) => b.length - a.length
        );

        sortedWords.forEach((unsafeWord) => {
          const regex = new RegExp(unsafeWord, "g");
          if (regex.test(text)) {
            foundWords.push(unsafeWord);
          }
        });

        return [...new Set(foundWords)];
      }

      function replaceUnsafeWords(text) {
        let replacedText = text;
        const replacements = [];
        const sortedEntries = Object.entries(UNSAFE_WORDS_MAP).sort(
          ([a], [b]) => b.length - a.length
        );

        sortedEntries.forEach(([unsafeWord, safeWord]) => {
          const regex = new RegExp(unsafeWord, "g");
          if (regex.test(replacedText)) {
            replacedText = replacedText.replace(regex, safeWord);
            if (!replacements.find((r) => r.original === unsafeWord)) {
              replacements.push({
                original: unsafeWord,
                replacement: safeWord,
              });
            }
          }
        });

        return { replacedText, replacements };
      }

      function checkSafety() {
        const input = document.getElementById("inputText").value;
        const resultDiv = document.getElementById("result");

        if (!input.trim()) {
          resultDiv.innerHTML =
            '<div class="unsafe">âŒ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>';
          return;
        }

        const unsafeWords = detectUnsafeWords(input);

        if (unsafeWords.length === 0) {
          resultDiv.innerHTML = `
                    <div class="safe">
                        <strong>âœ… ì•ˆì „í•œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤!</strong><br>
                        ê°ì§€ëœ ìœ„í—˜ ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                `;
        } else {
          const { replacedText, replacements } = replaceUnsafeWords(input);
          const replacementList = replacements
            .map((r) => `<li>"${r.original}" â†’ "${r.replacement}"</li>`)
            .join("");

          resultDiv.innerHTML = `
                    <div class="unsafe">
                        <strong>âš ï¸ ìœ„í—˜ ë‹¨ì–´ ê°ì§€!</strong><br>
                        <div class="word-list">
                            ê°ì§€ëœ ë‹¨ì–´: ${unsafeWords.join(", ")}
                        </div>
                    </div>
                    <div class="replacement">
                        <strong>ğŸ”„ ìë™ êµì²´ ê²°ê³¼:</strong><br>
                        <ul>${replacementList}</ul>
                        <strong>êµì²´ í›„ í…ìŠ¤íŠ¸:</strong><br>
                        <div class="word-list">${replacedText}</div>
                    </div>
                `;
        }
      }

      function clearInput() {
        document.getElementById("inputText").value = "";
        document.getElementById("result").innerHTML = "";
      }

      function setTestCase(element) {
        document.getElementById("inputText").value = element.textContent;
        checkSafety();
      }

      // Enter í‚¤ë¡œ ê²€ì‚¬
      document
        .getElementById("inputText")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            checkSafety();
          }
        });
    </script>
  </body>
</html>
